<ng-container [ngSwitch]="variant">
  <ng-container *ngSwitchCase="'text'">
    <ng-container *ngTemplateOutlet="textButton"></ng-container>
  </ng-container>

  <ng-container *ngSwitchCase="'elevated'">
    <ng-container *ngTemplateOutlet="elevatedButton"></ng-container>
  </ng-container>

  <ng-container *ngSwitchCase="'outlined'">
    <ng-container *ngTemplateOutlet="outlinedButton"></ng-container>
  </ng-container>

  <ng-container *ngSwitchCase="'filled'">
    <ng-container *ngTemplateOutlet="filledButton"></ng-container>
  </ng-container>
</ng-container>

<mat-menu #menu="matMenu" xPosition="before" [class]="menuClass">
  <button
    mat-menu-item
    *ngFor="let option of options"
    (click)="option.click()"
    [disabled]="option.disabled"
  >
    <mat-icon
      *ngIf="option.icon"
      fontSet="material-icons-outlined"
      [color]="theme"
      >{{ option.icon }}</mat-icon
    >
    <span>{{ option.label }}</span>
  </button>
</mat-menu>

<!-- Button variant templates -->
<ng-template #textButton>
  <button
    mat-button
    class="wairc-split-button"
    [ngClass]="buttonClass"
    [disabled]="disabled"
    [color]="theme"
    (click)="handleButtonClick()"
  >
    <mat-icon
      *ngIf="icon"
      fontSet="material-icons-outlined"
      class="icon-prefix"
      [ngClass]="iconClass"
      >{{ icon }}</mat-icon
    >
    {{ text }}
  </button>
  <button
    mat-button
    class="wairc-split-button-select"
    [ngClass]="dropdownClass"
    [disabled]="disabled"
    [color]="theme"
    [matMenuTriggerFor]="menu"
  >
    <mat-icon aria-hidden="false">expand_more</mat-icon>
  </button>
</ng-template>

<ng-template #elevatedButton>
  <button
    mat-raised-button
    class="wairc-split-button"
    [ngClass]="buttonClass"
    [disabled]="disabled"
    [color]="theme"
    (click)="handleButtonClick()"
  >
    <mat-icon
      *ngIf="icon"
      fontSet="material-icons-outlined"
      class="icon-prefix"
      [ngClass]="iconClass"
    >
      {{ icon }}</mat-icon>
    {{ text }}
  </button>
  <button
    mat-raised-button
    class="wairc-split-button-select"
    [ngClass]="dropdownClass"
    [disabled]="disabled"
    [color]="theme"
    [matMenuTriggerFor]="menu"
  >
    <mat-icon aria-hidden="false">expand_more</mat-icon>
  </button>
</ng-template>

<ng-template #outlinedButton>
  <button
    mat-stroked-button
    class="wairc-split-button"
    [ngClass]="buttonClass"
    [disabled]="disabled"
    [color]="theme"
    (click)="handleButtonClick()"
  >
    <mat-icon
      *ngIf="icon"
      fontSet="material-icons-outlined"
      class="icon-prefix"
      [ngClass]="iconClass"
      >{{ icon }}</mat-icon
    >
    {{ text }}
  </button>
  <button
    mat-stroked-button
    class="wairc-split-button-select"
    [ngClass]="dropdownClass"
    [disabled]="disabled"
    [color]="theme"
    [matMenuTriggerFor]="menu"
  >
    <mat-icon aria-hidden="false">expand_more</mat-icon>
  </button>
</ng-template>

<ng-template #filledButton>
  <button
    mat-flat-button
    class="wairc-split-button"
    [ngClass]="buttonClass"
    [disabled]="disabled"
    [color]="theme"
    (click)="handleButtonClick()"
  >
    <mat-icon
      *ngIf="icon"
      fontSet="material-icons-outlined"
      class="icon-prefix"
      [ngClass]="iconClass"
      >{{ icon }}</mat-icon
    >
    {{ text }}
  </button>
  <button
    mat-flat-button
    class="wairc-split-button-select"
    [ngClass]="dropdownClass"
    [disabled]="disabled"
    [color]="theme"
    [matMenuTriggerFor]="menu"
  >
    <mat-icon aria-hidden="false">expand_more</mat-icon>
  </button>
</ng-template>
